<!DOCTYPE html>
<script src="../live/js/jquery-3.3.1.min.js"></script>
<script src="../live/js/jquery.cookie.js"></script>
<script src="https://unpkg.com/swiper/js/swiper.js"> </script>  
<script src="https://unpkg.com/swiper/js/swiper.min.js"> </script>
<html>
<head>
  <meta charset="UTF-8">
  <title>郭毅小天使直播板块</title>
  <link href="./css/index.css" rel="stylesheet" type="text/css"/>
  <link href="./css/detail.css" rel="stylesheet" type="text/css"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
  <link rel="stylesheet" href="./../live/assert/font/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://unpkg.com/swiper/css/swiper.css">  
  <link rel="stylesheet" href="https://unpkg.com/swiper/css/swiper.min.css"> 
</head>
<body>


<section class="aui-flexView" id="search">
  <header>
    <div id="back">
      <i class="fa fa-angle-left"></i>
    </div>
  </header>
  <!-- <div class="contentBox">
    <div class="swiper-container">
        <div class="swiper-wrapper" id='imgs'>
            <div class="swiper-slide">图片一</div>
            <div class="swiper-slide">Slide 2</div>
            <div class="swiper-slide">Slide 3</div>
        </div>
        如果需要分页器
        <div class="swiper-pagination"></div>
        如果需要导航按钮
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
        
        如果需要滚动条
        <div class="swiper-scrollbar"></div>
    </div>
</div> -->
</section>

</body>
</html>

<script>
    $(function () {
    var $back = $('#back');
    $back.click(function () {
      window.history.back();
      console.log(111)
    });
  });
  
	var getData = window.location.search
	console.log(getData);
	var getData = getData.substr(1) //去掉?asd=123前面的问号
	console.log(getData);
  var addDiv = $('#search');
	// var host = window.location.host;
	var host = 'http://live.qvbilam.xin:9503/';
  //获取当前协议
	// var agreement = window.location.protocol;
	var agreement ='http://';
	// var send_url = agreement + '//' + host + '/index/bank/fight'
  var send_url = host + '/index/bank/fight'
  var swiperWrapper = $('#imgs')
  // 提交表单
  $.ajax({
    type: "get",
    url: send_url,
    data: getData,
    beforeSend: function (XMLHttpRequest) {
      XMLHttpRequest.setRequestHeader("authorization", $.cookie(host));
    },
    success: function (res) {
      res = JSON.parse(res)
      data = res.data
      console.log(data)
      // data.forEach(item=>{
      //       linkTo = document.createElement('a')
      //       linkTo.href = host + '/live/detail.html?fight_id=' + item.id 
      //       linkTo.className = 'swiper-slide'
      //       // linkTo.href = 'file:///D:/newFile/直播版块/git版本/liveTelecast/public/static/live/detail.html?fight_id=' + item.id 
      //       imgOne = document.createElement('img')
			// 			imgOne.src = item.image
      //       imgOne.className = 'swiper-slide'
      //       linkTo.append(imgOne)
			// 			swiperWrapper.append(linkTo)
			// 		})
       

      //     //一页四个滑动
      //     var swiper = new Swiper('.swiper-container', {
      //       slidesPerView: 4,
      //       spaceBetween: 10,
      //       pagination: {
      //         el: '.swiper-pagination',
      //         clickable: true,
      //       },
      //     });

      for (var i = 0; i < data.length; i++) {
        html = '<div class="linkBox">'
        html += '<a href="' + host + '/live/detail.html?fight_id=' + data[i].id + '">'
        html += '<img src="' + data[i].image + '" alt=""></a>'
        html += '</div>'
        addDiv.append(html)
      }
    }
  });

  // data =[
  //     {
  //       id: 1, 
  //       name: "魔枪之刃", 
  //       image: "http://image.qvbilam.xin/animation/fatezero/fight/fatezero01.png"
  //     },
  //     {
  //       id: 2, 
  //       name: "魔法师杀手", 
  //       image: "http://image.qvbilam.xin/animation/fatezero/fight/fatezero01.png"
  //     }
  //   ]
  // for (var i = 0; i < data.length; i++) {
  //       html = '<div class="linkBox">'
  //       html += '<a href="' + agreement + '//' + host + '/live/detail.html?fight_id=' + data[i].id + '">'
  //       html += '<img src="' + data[i].image + '" alt=""></a>'
  //       html += '</div>'
  //       addDiv.append(html)
  //     }
</script>