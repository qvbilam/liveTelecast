<!DOCTYPE html>
<script src="../live/js/jquery-3.3.1.min.js"></script>
<script src="../live/js/jquery.cookie.js"></script>
<script src="../live/js/VerToken.js"></script>
<script src="https://unpkg.com/swiper/js/swiper.js"> </script>  
<script src="https://unpkg.com/swiper/js/swiper.min.js"> </script>
<html>
<head>
    <meta charset="UTF-8">
    <title>郭毅小天使直播板块</title>
    <link href="./css/style.css" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="https://unpkg.com/swiper/css/swiper.css">  
    <link rel="stylesheet" href="https://unpkg.com/swiper/css/swiper.min.css">    
</head>
<body>


<section class="aui-flexView" id="search">
    <header class="aui-navBar aui-navBar-fixed b-line">
        <div class="aui-center">
            <div class="aui-jop-search">
                <i class="icon icon-search"></i>
                <input type="text" placeholder="请搜索">
            </div>
        </div>
        <a href="javascript:;" class="aui-navBar-item">
            取消
        </a>
    </header>
    <div>
        <div class="swiper-container">
            <div class="swiper-wrapper" id='imgs'>
                <!-- <div class="swiper-slide">图片一</div>
                <div class="swiper-slide">Slide 2</div>
                <div class="swiper-slide">Slide 3</div> -->
            </div>
            <!-- 如果需要分页器 -->
            <div class="swiper-pagination"></div>
            <!-- 如果需要导航按钮 -->
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
            
            <!-- 如果需要滚动条 -->
            <!-- <div class="swiper-scrollbar"></div> -->
        </div>
    </div>
    <!-- <div class="section">
        <span class="title">傻逼的一个狗栏目</span>
        <span class="more">查看更多傻逼</span>
    </div>
    <div id="content" class="content">
        <div class="aui-flex">
            <div class="aui-flex-box">
                <div class="aui-star-img">
                    <img src="images/banner2.jpeg" alt="">
                    <div class="contentName">傻逼战争冲啊冲啊冲啊冲啊冲啊冲啊冲啊冲啊冲啊冲啊冲啊冲啊</div>
                    <div class="contentTitle">给老子打冲啊冲啊冲啊司马傻逼草你妈的cnm给老子超出超出超出超出</div>
                </div>
            </div>
        </div>
    
    
        <div class="aui-flex">
            <div class="aui-flex-box">
                <div class="aui-star-img">
                    <img src="images/banner1.jpeg" alt="">
                    <div class="contentName">傻逼战争</div>
                    <div class="contentTitle">给老子打冲啊冲啊冲啊司马傻逼草你妈的cnm给老子超出超出超出超出</div>
                </div>
            </div>
        </div>
    </div> -->
</section>

<script>
window.onload=function(){
  var host = 'http://live.qvbilam.xin:9503/';
  //轮播放在这个叫做#banner的盒子里
  var swiperWrapper = $('#imgs')
	var bannerIndex = host + '/index/bank/banner'
	$.ajax({
    type: "get",
    url: bannerIndex,
    beforeSend: function (XMLHttpRequest) {
        XMLHttpRequest.setRequestHeader("authorization", $.cookie(host));
    },
    success: function (res) {
        console.log(res)
        res = JSON.parse(res)
        console.log(res.data)
        if(res.code != 0){
            alert(res.msg)
        }else{
          res.data.forEach(item=>{
						imgOne = document.createElement('img')
						imgOne.src = item.image
						imgOne.className = 'swiper-slide'
						swiperWrapper.append(imgOne)
					})
					//轮播的配置
					var mySwiper = new Swiper ('.swiper-container', {
							// direction: 'vertical', // 垂直切换选项
							loop: true, // 循环模式选项
							
							// 如果需要分页器
							pagination: {
									el: '.swiper-pagination',
							},
						
							// 如果需要前进后退按钮
							navigation: {
									nextEl: '.swiper-button-next',
									prevEl: '.swiper-button-prev',
							},
						
							// 如果需要滚动条
							scrollbar: {
							el: '.swiper-scrollbar',
							},
						})   
        }
    }
  });

  // img.forEach(item=>{
  //   imgOne = document.createElement('img')
  //   imgOne.src = item
  //   imgOne.className = 'swiper-slide'
	// 	swiperWrapper.append(imgOne)
	// 	console.log(item,'@@@@@@@@@@')
  // })
  // for(var i = 0; i < img.length; i++){
  //   html='<img src="'+img[i]+'" alt="" class="swiper-slide" />'
  //   swiperWrapper.append(html)
  // }
	

  // var addDiv = $('#search');
  var addBox = $('#search');
  var addDiv = $('#content');
  
  // var host = window.location.host;
  //获取当前协议
  // var agreement = window.location.protocol;
  // var agreement ='http';
  // var send_url = agreement + '//' + host + '/index/bank/index'
  var bankIndex = host + '/index/bank/index'
  // 提交表单
  $.ajax({
    type: "get",
    url: bankIndex,
    beforeSend: function (XMLHttpRequest) {
        XMLHttpRequest.setRequestHeader("authorization", $.cookie(host));
    },
    success: function (res) {
        console.log(res)
        res = JSON.parse(res)
        console.log(res.data)
        if(res.code != 0){
            alert(res.msg)
        }else{
          for(var i = 0;i < res.data.length; i++){
            html = '<div class="section">'
            html += '<span class="title">'+res.data[i].bank_name+'</span>'
            html += '<a  href="' + host + 'bank/detail.html?bank_id=' + res.data[i].bank_id + '" class="more">查看更多</a>'
            html += '</div>'
            html += '<div class="content" id="content'+i+'"></div>'
            addBox.append(html)
            var addDiv = $('#content'+i);
            for(var j=0; j < res.data[i].data.length; j++){
              html = '<div class="aui-flex contentBox"><div class="aui-flex-box"><div class="aui-star-img">'
              html += '<a href="' + host + 'bank/fight.html?program_id=' + res.data[i].data[j].id + '">'
              html += '<img src="' + res.data[i].data[j].image + '" alt="">'
              html += '<div class="contentName">'+res.data[i].data[j].name+'</div>'
              html += '<div class="contentTitle">给老子打冲啊冲啊冲啊司马傻逼草你妈的cnm给老子超出超出超出超出</div></a>'
              html += '</div></div></div>'
              addDiv.append(html)
            }
          }
        }
    }
  });

	// for (var i = 0; i < data.data.length; i++) {
	  // html = '<div class="aui-flex"><div class="aui-flex-box"><div class="aui-star-img">'
	  // html += '<a href="' + agreement + '//' + host + '/bank/fight.html?program_id=' + data.data[i].id + '">'
	  // html += '<img src="' + data.data[i].image + '" alt="">'
	  // html += '<div class="contentName">'+data.data[i].name+'</div>'
	  // html += '<div class="contentTitle">给老子打冲啊冲啊冲啊司马傻逼草你妈的cnm给老子超出超出超出超出</div></a>'
	  // html += '</div></div></div>'
	  // addDiv.append(html)
	// }

}
</script>

</body>
</html>